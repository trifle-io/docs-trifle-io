<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= meta&.dig('title') ? "#{meta['title']} | Trifle Docs" : 'Trifle Docs' %></title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'media',
      theme: {
        extend: {
          colors: {
            teal: {
              50: '#f0fdfa',
              100: '#ccfbf1',
              200: '#99f6e4',
              300: '#5eead4',
              400: '#2dd4bf',
              500: '#14b8a6',
              600: '#0d9488',
              700: '#0f766e',
              800: '#115e59',
              900: '#134e4a',
              950: '#042f2e'
            }
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    <%= Rouge::Themes::Base16.new.render %>

    body {
      font-family: 'Inter', sans-serif;
    }

    .prose pre {
      border-radius: 0.75rem;
      background: #0f172a;
      border: 1px solid #1e293b;
      padding: 1rem;
      overflow-x: auto;
    }

    .prose code {
      font-family: 'JetBrains Mono', monospace;
    }

    [x-cloak] {
      display: none !important;
    }

    .gradient-text {
      background: linear-gradient(90deg, #0d9488, #0891b2, #06b6d4, #0d9488);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 3s linear infinite;
    }

    @media (prefers-color-scheme: dark) {
      .gradient-text {
        background: linear-gradient(90deg, #14b8a6, #0ea5e9, #22d3ee, #14b8a6);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
    }

    @keyframes gradient-shift {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    nav#on-this-page ul {
      margin-top: 1rem;
      list-style: none;
      padding-left: 0;
      font-size: 0.875rem;
    }

    nav#on-this-page ul li {
      margin-top: 0.5rem;
      color: rgb(100 116 139);
    }

    nav#on-this-page ul li a {
      text-decoration: none;
    }

    nav#on-this-page ul li a:hover {
      color: rgb(15 118 110);
    }

    .callout {
      border-radius: 0.75rem;
      border: 1px solid rgb(203 213 225);
      background: rgb(248 250 252);
      padding: 1rem;
      margin: 1.25rem 0;
      color: rgb(30 41 59);
    }

    .callout > :last-child {
      margin-bottom: 0;
    }

    .callout-title {
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgb(15 118 110);
      margin-bottom: 0.5rem;
    }

    .callout-note {
      border-color: rgb(153 246 228);
      background: rgb(240 253 250);
    }

    .callout-warn {
      border-color: rgb(253 224 71);
      background: rgb(254 252 232);
    }

    .doc-card {
      border-radius: 0.75rem;
      border: 1px solid rgb(226 232 240);
      background: white;
      padding: 1rem;
      margin: 1rem 0;
    }

    .doc-card-title {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0;
    }

    .doc-card-body {
      color: rgb(71 85 105);
    }

    .doc-card-meta,
    .doc-card-link {
      font-size: 0.75rem;
      color: rgb(100 116 139);
      margin-top: 0.25rem;
    }

    .doc-card a {
      color: rgb(13 148 136);
      text-decoration: none;
    }

    .doc-card a:hover {
      color: rgb(15 118 110);
    }

    .tab-group {
      border: 1px solid rgb(226 232 240);
      border-radius: 0.75rem;
      overflow: hidden;
      margin: 1rem 0;
    }

    .tab-select {
      padding: 0.75rem;
      background: rgb(248 250 252);
      border-bottom: 1px solid rgb(226 232 240);
    }

    .tab-select select {
      width: 100%;
    }

    .tab-nav {
      display: none;
    }

    .tab-panel {
      padding: 1rem;
    }

    .method-card {
      border-radius: 0.75rem;
      border: 1px solid rgb(226 232 240);
      background: rgb(255 255 255 / 0.85);
      padding: 1rem;
      margin: 1.25rem 0;
    }

    .method-card-title {
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgb(71 85 105);
      margin-bottom: 0.5rem;
    }

    .method-card-signature {
      margin-bottom: 0.75rem;
    }

    .method-card-signature code {
      display: block;
      white-space: pre-wrap;
      border-radius: 0.5rem;
      border: 1px solid rgb(203 213 225);
      background: rgb(248 250 252);
      color: rgb(15 23 42);
      padding: 0.625rem 0.75rem;
      font-size: 0.875rem;
      font-family: 'JetBrains Mono', monospace;
    }

    .arg-list {
      margin: 0;
      padding: 0;
    }

    .arg-row {
      padding: 0.75rem 0 0;
      margin-top: 0.75rem;
      border-top: 1px solid rgb(226 232 240);
    }

    .arg-row dt {
      margin: 0;
      font-weight: 600;
      color: rgb(15 23 42);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.375rem;
    }

    .arg-row dd {
      margin: 0.375rem 0 0;
      color: rgb(71 85 105);
      font-size: 0.875rem;
    }

    .arg-row dd p {
      margin: 0;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      border-radius: 9999px;
      padding: 0.125rem 0.5rem;
      font-size: 0.6875rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      border: 1px solid transparent;
    }

    .badge-type {
      background: rgb(241 245 249);
      border-color: rgb(203 213 225);
      color: rgb(15 23 42);
    }

    .badge-required {
      background: rgb(220 252 231);
      border-color: rgb(134 239 172);
      color: rgb(22 101 52);
    }

    .badge-optional {
      background: rgb(254 249 195);
      border-color: rgb(253 224 71);
      color: rgb(133 77 14);
    }

    .badge-default {
      background: rgb(224 231 255);
      border-color: rgb(165 180 252);
      color: rgb(55 48 163);
    }

    @media (min-width: 640px) {
      .tab-select {
        display: none;
      }

      .tab-nav {
        display: block;
        border-bottom: 1px solid rgb(226 232 240);
        padding: 0.75rem 1rem 0;
        background: rgb(248 250 252);
      }

      .tab-nav-links {
        display: flex;
        gap: 1rem;
      }

      .tab-link {
        border: 0;
        background: transparent;
        padding: 0 0 0.5rem;
        font-size: 0.875rem;
        color: rgb(100 116 139);
        cursor: pointer;
      }

      .tab-link-active {
        color: rgb(13 148 136);
        border-bottom: 2px solid rgb(13 148 136);
      }
    }

    @media (prefers-color-scheme: dark) {
      .callout {
        border-color: rgb(51 65 85);
        background: rgb(15 23 42 / 0.78);
        color: rgb(203 213 225);
      }

      .callout-note {
        border-color: rgb(20 83 45);
        background: rgb(6 78 59 / 0.35);
      }

      .callout-warn {
        border-color: rgb(146 64 14);
        background: rgb(120 53 15 / 0.3);
      }

      .callout-title {
        color: rgb(94 234 212);
      }

      .doc-card {
        border-color: rgb(51 65 85);
        background: rgb(15 23 42 / 0.72);
      }

      .doc-card-title {
        color: rgb(248 250 252);
      }

      .doc-card-body,
      .doc-card-meta,
      .doc-card-link {
        color: rgb(148 163 184);
      }

      .doc-card a {
        color: rgb(45 212 191);
      }

      .doc-card a:hover {
        color: rgb(94 234 212);
      }

      .tab-group {
        border-color: rgb(51 65 85);
        background: rgb(15 23 42 / 0.6);
      }

      .tab-select {
        background: rgb(15 23 42 / 0.7);
        border-bottom-color: rgb(51 65 85);
      }

      .tab-select select {
        background: rgb(15 23 42);
        color: rgb(226 232 240);
        border-color: rgb(71 85 105);
      }

      .tab-panel {
        color: rgb(203 213 225);
      }

      .tab-nav {
        border-bottom-color: rgb(51 65 85);
        background: rgb(15 23 42 / 0.7);
      }

      .tab-link {
        color: rgb(148 163 184);
      }

      .tab-link-active {
        color: rgb(45 212 191);
        border-bottom-color: rgb(45 212 191);
      }

      .method-card {
        border-color: rgb(51 65 85);
        background: rgb(15 23 42 / 0.72);
      }

      .method-card-title {
        color: rgb(148 163 184);
      }

      .method-card-signature code {
        border-color: rgb(51 65 85);
        background: rgb(2 6 23);
        color: rgb(226 232 240);
      }

      .arg-row {
        border-top-color: rgb(51 65 85);
      }

      .arg-row dt {
        color: rgb(226 232 240);
      }

      .arg-row dd {
        color: rgb(148 163 184);
      }

      .badge-type {
        background: rgb(30 41 59);
        border-color: rgb(71 85 105);
        color: rgb(226 232 240);
      }

      .badge-required {
        background: rgb(20 83 45 / 0.5);
        border-color: rgb(22 101 52);
        color: rgb(187 247 208);
      }

      .badge-optional {
        background: rgb(120 53 15 / 0.45);
        border-color: rgb(146 64 14);
        color: rgb(254 240 138);
      }

      .badge-default {
        background: rgb(49 46 129 / 0.45);
        border-color: rgb(67 56 202);
        color: rgb(199 210 254);
      }
    }
  </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 antialiased transition-colors">
  <% current_path = request.path_info.to_s.empty? ? '/' : request.path_info %>
  <% search_action = [request.script_name, 'search'].join('/').gsub(%r{/+}, '/') %>
  <% search_action = "/#{search_action}" unless search_action.start_with?('/') %>

  <nav class="fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-slate-950/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800" aria-label="Main navigation">
    <div class="max-w-7xl mx-auto px-6 py-4 flex flex-wrap items-center justify-between gap-4">
      <a href="/" class="flex items-center gap-2" aria-label="Trifle Docs Home">
        <svg
          viewBox="0 0 72 84"
          class="h-8 w-8 text-teal-500"
          xmlns="http://www.w3.org/2000/svg"
          style="fill-rule:evenodd;clip-rule:evenodd;"
          fill="currentColor"
          aria-hidden="true"
        >
          <g>
            <g transform="matrix(1,0,0,1,0.442181,0.243718)">
              <path d="M31.5,2.441C32.41,0.973 33.062,0.441 34.328,0.133C35.938,-0.258 37.812,0.203 40.109,1.551C42.781,3.121 44.746,4.824 46.457,7.059C48.188,9.324 48.191,9.328 49.949,9.789C51.508,10.203 55.07,11.488 56.129,12.023C57.98,12.957 59.535,14.426 60.996,16.617C61.805,17.828 61.949,17.945 63.098,18.285C66.676,19.355 68.371,20.211 69.688,21.609C71.105,23.117 71.52,24.871 71.086,27.527C70.887,28.754 69.461,35.641 68.605,39.504C67.988,42.305 67.125,46.43 66.637,48.918C66.496,49.637 65.625,54.031 64.698,58.684C63.773,63.336 62.844,68.066 62.633,69.188C61.766,73.816 61.184,75.285 59.305,77.625C57.098,80.367 53.527,82.055 48.273,82.836C45.016,83.32 43.504,83.402 37.293,83.445C29.031,83.5 25.117,83.285 21.359,82.578C17.242,81.801 14.508,80.531 12.48,78.457C11.734,77.691 11.434,77.301 10.84,76.352C9.531,74.262 9.191,73.16 8.128,67.578C7.801,65.844 7.367,63.633 7.16,62.66C6.957,61.691 6.012,56.98 5.059,52.195C2.784,40.777 2.594,39.84 1.444,34.504C0.905,32.008 0.375,29.453 0.262,28.832C-0.293,25.77 0.008,24.168 1.418,22.66C2.879,21.09 5.582,19.801 8.984,19.051C9.707,18.891 10.469,18.684 10.672,18.594C11.09,18.41 11.07,18.434 11.984,17.023C13.133,15.25 14.125,14.156 15.531,13.113C17.25,11.84 19.172,10.898 22.293,9.797C25.559,8.645 26.203,8.363 27.125,7.688C28.543,6.645 29.918,4.992 31.5,2.441ZM34.734,6.745C35.085,6.25 35.374,5.622 35.582,4.758C35.642,4.51 36.817,4.538 37.579,5.188C38.595,6.055 38.775,6.146 40.189,7.537C41.072,8.406 41.063,8.663 42.614,10.601C43.985,12.316 44.749,12.811 45.393,13.308C46.28,13.999 47.615,14.101 49.764,14.691C51.299,15.113 53.209,15.944 53.881,16.279C54.552,16.615 55.159,17.202 55.686,17.714C56.073,18.085 56.538,18.716 56.968,19.56C58.136,21.853 58.887,22.126 61.519,22.946C63.828,23.665 65.197,23.828 65.792,24.277C65.952,24.398 63.632,24.709 61.726,25.201C59.468,25.787 54.561,26.193 51.514,26.517C44.788,27.232 39.696,27.33 32.606,27.244C26.172,27.166 24.206,27.315 19.572,27.054C18.458,26.992 9.227,26.125 7.371,25.535C6.559,25.273 5.683,25.054 5.683,25.054C5.683,25.054 8.711,24.248 11.304,23.517C13.336,22.943 14.174,22.668 14.788,22.096C15.344,21.579 16.143,21.105 16.928,19.617C17.814,17.933 17.884,17.679 18.685,16.874C19.814,15.737 20.523,15.249 23.5,14.374C28.055,13.031 29.767,11.527 31.388,10.039C32.485,9.031 33.836,8.014 34.734,6.745ZM36.966,32.393C40.358,32.42 55.253,31.273 58.916,30.863C62.753,30.434 65.952,29.492 65.902,29.784C65.866,30.001 65.332,33.197 64.996,34.904C64.438,37.72 63.254,42.159 63.254,42.159C63.254,42.159 62.357,42.276 60.488,41.743C58.488,41.173 54.915,35.081 52.086,35.097C49.199,35.113 45.938,38.551 43.796,38.648C41.816,38.738 38.558,33.922 36.472,33.895C34.387,33.867 29.347,38.691 24.985,43.37C20.948,47.7 18.168,50.684 15.659,50.376C14.338,50.213 13.783,49.631 9.421,48.619C8.96,48.512 7.428,39.915 7.123,38.458C6.619,36.024 4.879,29.776 4.898,29.752C4.898,29.752 14.403,31.881 19.164,32.039C23.695,32.188 33.764,32.368 36.966,32.393ZM51.768,39.812C53.68,39.816 56.64,45.333 58.792,45.922C61.955,46.788 62.39,46.771 62.39,46.771C62.39,46.771 62.127,48.142 61.66,50.519L60.646,54.754C60.646,54.754 59.789,54.705 59.182,54.3C57.837,53.401 54.638,52.125 53.532,51.498C51.618,50.413 48.266,49.504 46.242,49.345C43.402,49.123 41.191,49.616 37.837,50.69C34.954,51.614 33.852,52.399 31.434,52.954C28.804,53.557 25.944,52.846 25.309,52.662C22.189,51.755 24.074,50.945 28.314,46.258C30.729,43.589 34.162,39.638 36.024,39.584C37.63,39.538 41.474,43.47 43.607,43.444C45.731,43.417 49.622,39.808 51.768,39.812ZM23.993,56.884C26.927,57.485 29.623,57.595 32.211,57.26C34.625,56.948 37.69,55.258 41.236,54.095C43.228,53.441 47.171,53.611 48.72,54.064C51.122,54.767 53.572,56.026 56.297,57.621C58.173,58.72 59.945,59.259 59.945,59.259L59.126,63.698C59.126,63.698 57.441,63.054 56.319,62.559C53.256,61.208 50.066,61.336 47.892,61.89C43.691,62.962 41.873,63.71 38.188,64.952C34.321,66.255 32.594,66.921 29.925,67.705C28.272,68.19 26.087,68.692 23.407,68.997C19.602,69.43 18.697,69.379 17.055,69.166C14.794,68.872 12.426,67.466 12.426,67.466C12.426,67.466 9.719,53.428 9.957,53.456C13.092,53.82 13.177,54.293 15.642,54.841C17.86,55.335 20.597,56.188 23.993,56.884ZM51.557,66.165C57.88,66.668 58.404,68.352 58.404,68.352C58.404,68.352 58.512,70.388 56.584,73.763C56.142,74.537 54.963,75.751 54.271,76.216C53.26,76.891 51.77,77.506 50.285,77.885C45.918,78.998 37.197,79.369 27.236,78.779C24.16,78.599 20.977,77.844 18.607,76.869C14.811,75.306 13.653,72.496 13.653,72.496C13.653,72.496 16.258,73.228 17.004,73.295C18.403,73.421 19.037,73.52 20.954,73.52C23.326,73.52 26.06,73.097 28.169,72.648C31.017,72.041 33.737,71.276 35.728,70.431C37.806,69.549 42.729,67.943 45.969,66.928C47.182,66.548 49.871,66.031 51.557,66.165Z"/>
            </g>
            <g transform="matrix(2.779089,0,-0,-7.279669,-18.643586,306.024137)">
              <ellipse cx="12.041" cy="36.556" rx="0.898" ry="0.342"/>
            </g>
          </g>
        </svg>
        <span class="font-semibold text-lg">Trifle</span>
      </a>

      <form action="<%= search_action %>" method="get" class="w-full md:w-auto md:min-w-[28rem] lg:min-w-[34rem]" role="search" aria-label="Search documentation">
        <div class="flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 overflow-hidden">
          <label for="scope" class="sr-only">Scope</label>
          <select id="scope" name="scope" class="border-0 bg-transparent text-sm text-slate-600 dark:text-slate-300 pl-3 py-2 focus:ring-0">
            <option value="">All docs</option>
            <% sitemap.sort_by { |(_key, option)| option.dig('_meta', 'nav_order') || 0 }.each do |(key, option)| %>
              <% next if key == '_meta' %>
              <% next unless option.dig('_meta', 'url') %>
              <% scope_value = option.dig('_meta', 'url').sub(%r{^/}, '') %>
              <option value="<%= scope_value %>" <%= params['scope'] == scope_value ? 'selected' : '' %>><%= option.dig('_meta', 'title') %></option>
            <% end %>
          </select>
          <div class="h-5 w-px bg-slate-200 dark:bg-slate-700"></div>
          <label for="query" class="sr-only">Search query</label>
          <input
            id="query"
            type="text"
            name="query"
            value="<%= params['query'] %>"
            placeholder="Search docs..."
            class="w-full border-0 bg-transparent px-3 py-2 text-sm placeholder-slate-400 focus:ring-0"
          >
          <button type="submit" class="px-3 py-2 text-sm font-semibold text-teal-700 dark:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition">
            Search
          </button>
        </div>
      </form>

      <div class="hidden md:flex items-center gap-6 text-sm text-slate-500 dark:text-slate-400">
        <a href="https://trifle.io/blog" class="hover:text-teal-600 dark:hover:text-teal-400 transition">Blog</a>
        <a href="https://app.trifle.io" class="hover:text-teal-600 dark:hover:text-teal-400 transition">App</a>
        <a href="https://github.com/trifle-io" class="hover:text-teal-600 dark:hover:text-teal-400 transition">GitHub</a>
      </div>
    </div>
  </nav>

  <div class="pt-28 pb-20 px-6">
    <div class="max-w-[88rem] mx-auto flex gap-10">
      <aside class="hidden lg:block w-72 shrink-0">
        <div class="sticky top-28">
          <nav aria-label="Documentation navigation">
            <ul class="space-y-5 text-sm">
              <li>
                <a href="/" class="group flex items-center gap-2 font-semibold <%= current_path == '/' ? 'text-teal-600 dark:text-teal-400' : 'text-slate-700 dark:text-slate-300 hover:text-teal-600 dark:hover:text-teal-400' %>">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819" />
                  </svg>
                  <span>Home</span>
                </a>
              </li>

              <% sitemap.sort_by { |(_key, option)| option.dig('_meta', 'nav_order') || 0 }.each do |(section_key, section)| %>
                <% next if section_key == '_meta' %>
                <% section_url = section.dig('_meta', 'url') %>
                <% next unless section_url %>
                <% section_active = current_path.start_with?(section_url) %>
                <% section_icon = section.dig('_meta', 'svg') %>
                <% section_lang = section.dig('_meta', 'lang') %>

                <li>
                  <a href="<%= section_url %>" class="group flex items-center gap-2 font-semibold <%= section_active ? 'text-teal-600 dark:text-teal-400' : 'text-slate-700 dark:text-slate-300 hover:text-teal-600 dark:hover:text-teal-400' %>">
                    <% if section_icon && !section_icon.to_s.strip.empty? %>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="<%= section_icon %>" />
                      </svg>
                    <% end %>
                    <span><%= section.dig('_meta', 'title') %></span>
                    <% if section_lang && !section_lang.to_s.strip.empty? %>
                      <svg viewBox="0 0 128 128" class="ml-auto h-4 w-4 shrink-0 opacity-70 group-hover:opacity-100" fill="currentColor" aria-hidden="true">
                        <%= section_lang %>
                      </svg>
                    <% end %>
                  </a>

                  <% if section_active %>
                    <ul class="mt-2 ml-3 border-l border-slate-200 dark:border-slate-800 pl-4 space-y-2">
                      <% section.sort_by { |(_key, child)| child.dig('_meta', 'nav_order') || 0 }.each do |(child_key, child)| %>
                        <% next if child_key == '_meta' %>
                        <% child_url = child.dig('_meta', 'url') %>
                        <% next unless child_url %>
                        <% child_active = current_path == child_url || current_path.start_with?("#{child_url}/") %>

                        <% child_has_children = child.any? { |k, v| k != '_meta' && v.is_a?(Hash) && v.dig('_meta', 'url') } %>
                        <li>
                          <a href="<%= child_url %>" class="flex items-center gap-1 <%= child_active ? 'text-teal-600 dark:text-teal-400 font-medium' : 'text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400' %>">
                            <% if child_has_children %>
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 shrink-0 transition-transform <%= child_active ? 'rotate-90' : '' %>" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                              </svg>
                            <% end %>
                            <span><%= child.dig('_meta', 'title') %></span>
                          </a>

                          <% if child_active %>
                            <ul class="mt-1 ml-3 border-l border-slate-200 dark:border-slate-800 pl-3 space-y-1">
                              <% child.sort_by { |(_key, grandchild)| grandchild.dig('_meta', 'nav_order') || 0 }.each do |(grandchild_key, grandchild)| %>
                                <% next if grandchild_key == '_meta' %>
                                <% grandchild_url = grandchild.dig('_meta', 'url') %>
                                <% next unless grandchild_url %>
                                <% grandchild_active = current_path == grandchild_url %>
                                <li>
                                  <a href="<%= grandchild_url %>" class="text-sm <%= grandchild_active ? 'text-teal-600 dark:text-teal-400 font-medium' : 'text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400' %>"><%= grandchild.dig('_meta', 'title') %></a>
                                </li>
                              <% end %>
                            </ul>
                          <% end %>
                        </li>
                      <% end %>
                    </ul>
                  <% end %>
                </li>
              <% end %>
            </ul>
          </nav>
        </div>
      </aside>

      <main class="min-w-0 flex-1">
        <% if meta&.dig('breadcrumbs') %>
          <div class="mb-6 text-sm text-slate-500 dark:text-slate-400 flex flex-wrap items-center gap-2">
            <% meta['breadcrumbs'].count.times do |i| %>
              <% breadcrumb_page = sitemap.dig(*meta['breadcrumbs'].take(i + 1)) %>
              <% if breadcrumb_page&.dig('_meta', 'url') %>
                <a href="<%= breadcrumb_page.dig('_meta', 'url') %>" class="hover:text-teal-600 dark:hover:text-teal-400"><%= breadcrumb_page.dig('_meta', 'title') %></a>
                <% if i + 1 != meta['breadcrumbs'].count %>
                  <span>/</span>
                <% end %>
              <% end %>
            <% end %>
          </div>
        <% end %>

        <article class="prose prose-slate dark:prose-invert max-w-none prose-a:text-teal-700 dark:prose-a:text-teal-400">
          <%= yield %>
        </article>
      </main>

      <aside class="hidden xl:block w-56 shrink-0">
        <% if meta&.dig('toc') && !meta.dig('toc').to_s.strip.empty? %>
          <div class="sticky top-28">
            <nav id="on-this-page" aria-labelledby="on-this-page-title">
              <h2 id="on-this-page-title" class="font-semibold text-slate-900 dark:text-white">On this page</h2>
              <%= meta.dig('toc') %>
            </nav>
          </div>
        <% end %>
      </aside>
    </div>
  </div>

  <footer class="py-12 px-6 border-t border-slate-200 dark:border-slate-800" role="contentinfo">
    <div class="max-w-6xl mx-auto">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <a href="https://trifle.io" class="flex items-center gap-2" aria-label="Trifle - Home">
          <svg
            viewBox="0 0 72 84"
            class="h-6 w-6 text-teal-500"
            xmlns="http://www.w3.org/2000/svg"
            style="fill-rule:evenodd;clip-rule:evenodd;"
            fill="currentColor"
            aria-hidden="true"
          >
            <g>
              <g transform="matrix(1,0,0,1,0.442181,0.243718)">
                <path d="M31.5,2.441C32.41,0.973 33.062,0.441 34.328,0.133C35.938,-0.258 37.812,0.203 40.109,1.551C42.781,3.121 44.746,4.824 46.457,7.059C48.188,9.324 48.191,9.328 49.949,9.789C51.508,10.203 55.07,11.488 56.129,12.023C57.98,12.957 59.535,14.426 60.996,16.617C61.805,17.828 61.949,17.945 63.098,18.285C66.676,19.355 68.371,20.211 69.688,21.609C71.105,23.117 71.52,24.871 71.086,27.527C70.887,28.754 69.461,35.641 68.605,39.504C67.988,42.305 67.125,46.43 66.637,48.918C66.496,49.637 65.625,54.031 64.698,58.684C63.773,63.336 62.844,68.066 62.633,69.188C61.766,73.816 61.184,75.285 59.305,77.625C57.098,80.367 53.527,82.055 48.273,82.836C45.016,83.32 43.504,83.402 37.293,83.445C29.031,83.5 25.117,83.285 21.359,82.578C17.242,81.801 14.508,80.531 12.48,78.457C11.734,77.691 11.434,77.301 10.84,76.352C9.531,74.262 9.191,73.16 8.128,67.578C7.801,65.844 7.367,63.633 7.16,62.66C6.957,61.691 6.012,56.98 5.059,52.195C2.784,40.777 2.594,39.84 1.444,34.504C0.905,32.008 0.375,29.453 0.262,28.832C-0.293,25.77 0.008,24.168 1.418,22.66C2.879,21.09 5.582,19.801 8.984,19.051C9.707,18.891 10.469,18.684 10.672,18.594C11.09,18.41 11.07,18.434 11.984,17.023C13.133,15.25 14.125,14.156 15.531,13.113C17.25,11.84 19.172,10.898 22.293,9.797C25.559,8.645 26.203,8.363 27.125,7.688C28.543,6.645 29.918,4.992 31.5,2.441ZM34.734,6.745C35.085,6.25 35.374,5.622 35.582,4.758C35.642,4.51 36.817,4.538 37.579,5.188C38.595,6.055 38.775,6.146 40.189,7.537C41.072,8.406 41.063,8.663 42.614,10.601C43.985,12.316 44.749,12.811 45.393,13.308C46.28,13.999 47.615,14.101 49.764,14.691C51.299,15.113 53.209,15.944 53.881,16.279C54.552,16.615 55.159,17.202 55.686,17.714C56.073,18.085 56.538,18.716 56.968,19.56C58.136,21.853 58.887,22.126 61.519,22.946C63.828,23.665 65.197,23.828 65.792,24.277C65.952,24.398 63.632,24.709 61.726,25.201C59.468,25.787 54.561,26.193 51.514,26.517C44.788,27.232 39.696,27.33 32.606,27.244C26.172,27.166 24.206,27.315 19.572,27.054C18.458,26.992 9.227,26.125 7.371,25.535C6.559,25.273 5.683,25.054 5.683,25.054C5.683,25.054 8.711,24.248 11.304,23.517C13.336,22.943 14.174,22.668 14.788,22.096C15.344,21.579 16.143,21.105 16.928,19.617C17.814,17.933 17.884,17.679 18.685,16.874C19.814,15.737 20.523,15.249 23.5,14.374C28.055,13.031 29.767,11.527 31.388,10.039C32.485,9.031 33.836,8.014 34.734,6.745ZM36.966,32.393C40.358,32.42 55.253,31.273 58.916,30.863C62.753,30.434 65.952,29.492 65.902,29.784C65.866,30.001 65.332,33.197 64.996,34.904C64.438,37.72 63.254,42.159 63.254,42.159C63.254,42.159 62.357,42.276 60.488,41.743C58.488,41.173 54.915,35.081 52.086,35.097C49.199,35.113 45.938,38.551 43.796,38.648C41.816,38.738 38.558,33.922 36.472,33.895C34.387,33.867 29.347,38.691 24.985,43.37C20.948,47.7 18.168,50.684 15.659,50.376C14.338,50.213 13.783,49.631 9.421,48.619C8.96,48.512 7.428,39.915 7.123,38.458C6.619,36.024 4.879,29.776 4.898,29.752C4.898,29.752 14.403,31.881 19.164,32.039C23.695,32.188 33.764,32.368 36.966,32.393ZM51.768,39.812C53.68,39.816 56.64,45.333 58.792,45.922C61.955,46.788 62.39,46.771 62.39,46.771C62.39,46.771 62.127,48.142 61.66,50.519L60.646,54.754C60.646,54.754 59.789,54.705 59.182,54.3C57.837,53.401 54.638,52.125 53.532,51.498C51.618,50.413 48.266,49.504 46.242,49.345C43.402,49.123 41.191,49.616 37.837,50.69C34.954,51.614 33.852,52.399 31.434,52.954C28.804,53.557 25.944,52.846 25.309,52.662C22.189,51.755 24.074,50.945 28.314,46.258C30.729,43.589 34.162,39.638 36.024,39.584C37.63,39.538 41.474,43.47 43.607,43.444C45.731,43.417 49.622,39.808 51.768,39.812ZM23.993,56.884C26.927,57.485 29.623,57.595 32.211,57.26C34.625,56.948 37.69,55.258 41.236,54.095C43.228,53.441 47.171,53.611 48.72,54.064C51.122,54.767 53.572,56.026 56.297,57.621C58.173,58.72 59.945,59.259 59.945,59.259L59.126,63.698C59.126,63.698 57.441,63.054 56.319,62.559C53.256,61.208 50.066,61.336 47.892,61.89C43.691,62.962 41.873,63.71 38.188,64.952C34.321,66.255 32.594,66.921 29.925,67.705C28.272,68.19 26.087,68.692 23.407,68.997C19.602,69.43 18.697,69.379 17.055,69.166C14.794,68.872 12.426,67.466 12.426,67.466C12.426,67.466 9.719,53.428 9.957,53.456C13.092,53.82 13.177,54.293 15.642,54.841C17.86,55.335 20.597,56.188 23.993,56.884ZM51.557,66.165C57.88,66.668 58.404,68.352 58.404,68.352C58.404,68.352 58.512,70.388 56.584,73.763C56.142,74.537 54.963,75.751 54.271,76.216C53.26,76.891 51.77,77.506 50.285,77.885C45.918,78.998 37.197,79.369 27.236,78.779C24.16,78.599 20.977,77.844 18.607,76.869C14.811,75.306 13.653,72.496 13.653,72.496C13.653,72.496 16.258,73.228 17.004,73.295C18.403,73.421 19.037,73.52 20.954,73.52C23.326,73.52 26.06,73.097 28.169,72.648C31.017,72.041 33.737,71.276 35.728,70.431C37.806,69.549 42.729,67.943 45.969,66.928C47.182,66.548 49.871,66.031 51.557,66.165Z"/>
              </g>
              <g transform="matrix(2.779089,0,-0,-7.279669,-18.643586,306.024137)">
                <ellipse cx="12.041" cy="36.556" rx="0.898" ry="0.342"/>
              </g>
            </g>
          </svg>
          <span class="font-semibold">Trifle</span>
        </a>

        <nav class="flex items-center gap-6 text-sm text-slate-500" aria-label="Footer navigation">
          <a href="https://trifle.io/blog" class="hover:text-teal-600 dark:hover:text-teal-400 transition">Blog</a>
          <a href="/" class="hover:text-teal-600 dark:hover:text-teal-400 transition">Docs</a>
          <a href="https://github.com/trifle-io" class="hover:text-teal-600 dark:hover:text-teal-400 transition">GitHub</a>
          <a href="https://app.trifle.io" class="hover:text-teal-600 dark:hover:text-teal-400 transition">App</a>
        </nav>

        <div class="text-sm text-slate-500 dark:text-slate-400">
          &copy; 2026 Trifle, Inc.
        </div>
      </div>
    </div>
  </footer>
</body>
</html>
